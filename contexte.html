<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>La Ville Cach√©e ‚Äî Contexte & Missions</title>
<style>
  /* ----- DESIGN HORREUR ----- */
  body {
    margin: 0;
    padding: 30px;
    font-family: 'Creepster', cursive, sans-serif;
    background-color: #0d0d0d;
    background-image: url('https://i.imgur.com/4K1vN3p.png');
    background-size: cover;
    color: #ff4d4d;
    line-height: 1.6;
  }

  h1, h2 {
    text-align: center;
    color: #ff1a1a;
    text-shadow: 2px 2px 4px #000;
  }

  .container, .card {
    max-width: 1000px;
    margin: auto;
    padding: 20px;
    background-color: rgba(0,0,0,0.7);
    border-radius: 15px;
    border: 3px solid #ff1a1a;
    box-shadow: 0 0 20px #ff0000;
  }

  p {
    margin-bottom: 15px;
    font-size: 18px;
  }

  ul {
    margin-left: 20px;
    margin-bottom: 20px;
  }

  li {
    margin-bottom: 8px;
    font-weight: bold;
  }

  button {
    display: block;
    margin: 20px auto;
    padding: 15px 30px;
    font-size: 20px;
    background-color: #ff1a1a;
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    text-transform: uppercase;
    box-shadow: 0 0 10px #ff0000;
    transition: transform 0.2s;
  }

  button:hover {
    transform: scale(1.1);
    background-color: #e60000;
  }

  .missions {
    display: grid;
    grid-template-columns: repeat(2,1fr);
    gap: 12px;
    margin-top: 18px;
  }

  .m {
    padding: 14px;
    border-radius: 10px;
    background: rgba(30,0,0,0.25);
    border: 1px solid rgba(255,10,10,0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .m.locked { opacity: 0.85; }

  .m .title { font-weight: 700; }

  .btn.ghost { background: transparent; border: 1px solid rgba(255,80,80,0.15); }

  footer { margin-top: 16px; color: #bda; font-size: .9rem; text-align:center; }

  @media(max-width:720px){ .missions { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<!-- Musique de fond -->
<audio autoplay loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  Votre navigateur ne supporte pas la lecture audio.
</audio>

<div class="container">
  <h1>La Ville Cach√©e de Bagneux</h1>
  <h2>Contexte de l‚Äôenqu√™te</h2>

  <p>Inspecteur, Inspectrice, la ville de Bagneux est en √©moi. Un meurtre a √©t√© perp√©tr√©, et une femme a √©t√© retrouv√©e morte √† son domicile. Comment est-elle morte ? Et pourquoi √©tait-elle la cible de son meurtrier ?</p>

  <p>Voici votre mission : retrouver le ou la coupable √† travers les enqu√™tes que vous allez mener. Mais avant de prouver votre valeur, vous devez d√©montrer que vous √™tes digne de confiance et capable de r√©fl√©chir comme un v√©ritable d√©tective.</p>

  <h2>Les suspects</h2>
  <ul>
    <li><strong>Noah</strong> - son copain : tensions r√©centes et jalousie.</li>
    <li><strong>David</strong> - son patron : conflit professionnel sur un projet important.</li>
    <li><strong>Maya</strong> - sa meilleure amie : rivalit√© cach√©e pour raisons personnelles.</li>
    <li><strong>Yanco</strong> - son ex : rancune suite √† la rupture.</li>
    <li><strong>Pape</strong> - ami d‚Äôenfance : jalousie pour un succ√®s ou relation.</li>
    <li><strong>Oumayra</strong> - sa s≈ìur : conflit familial ou h√©ritage.</li>
    <li><strong>Cathy</strong> - sa pire ennemie : vengeance ou jalousie directe.</li>
    <li><strong>Hawa</strong> - sa voisine : connaissait ses habitudes et pouvait √™tre jalouse.</li>
    <li><strong>Oumayma</strong> - sa prof de pilates : acc√®s √† domicile pour ses cours.</li>
    <li><strong>Kyle</strong> - son coll√®gue de travail : disputes ou d√©saccords professionnels.</li>
    <li><strong>Nezir</strong> - son harceleur : surveillait la victime et connaissait son planning.</li>
    <li><strong>Tatiana</strong> - femme de m√©nage : acc√®s aux cl√©s et connaissance de ses habitudes.</li>
  </ul>

  <div class="card">
    <h2>Liste des missions</h2>
    <p style="text-align:center;margin-top:10px">
      <button class="btn" id="start1">Commencer la premi√®re mission</button>
    </p>

    <div class="missions" id="missionsList"></div>

    <p style="margin-top:14px;color:#ffdede">Astuce : notez chaque code r√©v√©l√© √† la fin de chaque mission. Vous en aurez besoin pour d√©bloquer la suivante.</p>
  </div>

  <footer>La Ville Cach√©e ‚Äî Bagneux ‚Ä¢ Jeu d'enqu√™te</footer>
</div>

<script>
const missions = [
  { id:1, title:"Mission 1 ‚Äî Tatiana & Nezir", file:"Mission1.html", requiredCode:null },
  { id:2, title:"Mission 2 ‚Äî Oumayma & Kyle", file:"mission2.html", requiredCode:"ombretat2025" },
  { id:3, title:"Mission 3 ‚Äî Noah & Oumayra", file:"Mission3.html", requiredCode:"ombresouky2025" },
  { id:4, title:"Mission 4 ‚Äî Cathy & Yanco", file:"mission4.html", requiredCode:"ombresnofra2025" },
  { id:5, title:"Mission 5 ‚Äî Pape & Maya", file:"Mission5.html", requiredCode:"ombrescy2025" },
  { id:6, title:"Mission 6 ‚Äî Hawa & David", file:"mission6.html", requiredCode:"ombrespm2025" }
];

function keyDone(n){ return 'mission'+n+'_done'; }
function keyCode(n){ return 'mission'+n+'_code'; }

const listEl = document.getElementById('missionsList');

missions.forEach(m=>{
  const div = document.createElement('div');
  div.className = 'm';
  const done = localStorage.getItem(keyDone(m.id)) === 'true';
  const title = document.createElement('div');
  title.innerHTML = `<div class="title">${m.title}</div><div style="font-size:.85rem;color:#d8bcbc">Fichier : ${m.file}</div>`;
  div.appendChild(title);

  const right = document.createElement('div');

  if(m.id === 1 || done){
    const btn = document.createElement('button');
    btn.className = 'btn';
    btn.textContent = done ? 'üîì Ouvrir' : '‚ñ∂Ô∏è Acc√©der';
    btn.onclick = () => window.location.href = m.file;
    right.appendChild(btn);
  } else {
    const btn = document.createElement('button');
    btn.className = 'btn ghost';
    btn.textContent = 'üîí Verrouill√©';
    btn.onclick = () => tryUnlock(m);
    right.appendChild(btn);
  }

  div.appendChild(right);
  listEl.appendChild(div);
});

document.getElementById('start1').addEventListener('click', ()=> window.location.href = 'Mission1.html');

function tryUnlock(mission){
  const prevIndex = mission.id - 1;
  const storedPrevKey = localStorage.getItem(keyCode(prevIndex));
  const officialRequired = mission.requiredCode;
  const answer = prompt(`Acc√®s √† ${mission.title} ‚Äî Entrez le code secret obtenu depuis la mission pr√©c√©dente :`);
  if (!answer) return;
  const ans = answer.trim().toLowerCase();
  if ((storedPrevKey && ans === storedPrevKey.toLowerCase()) || (officialRequired && ans === officialRequired.toLowerCase())){
    localStorage.setItem(keyDone(mission.id), 'true');
    localStorage.setItem(keyCode(prevIndex), ans);
    alert(`‚úÖ Acc√®s autoris√© ‚Äî ouverture de ${mission.title}`);
    window.location.href = mission.file;
  } else {
    alert('‚ùå Code invalide. Vous ne pouvez pas ouvrir cette mission pour l‚Äôinstant.');
  }
}

// Rafra√Æchit la liste apr√®s retour sur la page
window.addEventListener('focus', ()=> location.reload());
</script>

</body>
</html>
